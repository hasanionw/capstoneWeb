


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TRAINERS</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="css/style.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="trainer_style.css" >



<style>
 
tr{
  text-align:center;
}
td{
  text-align:center;
}

</style>
</head>

<body class="grey lighten-3" >

  <!--Main Navigation-->
  <header>

    <nav class="navbar fixed-top navbar-expand-lg navbar-light white scrolling-navbar" >
      <div class="container-fluid" >

        <!-- Brand -->
        <a class="navbar-brand waves-effect"  style="position: relative;left:50px;">
           Admin:
          <strong class="green-text">
          
                
                </strong>
        </a>

        <!-- Collapse -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" >
          <span class="navbar-toggler-icon" ></span>
        </button>

        <!-- Links -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

          <!-- Left -->
          <ul class="navbar-nav mr-auto">
            
          </ul>

          <!-- Right -->
          <ul class="navbar-nav nav-flex-icons">
           
            <li class="nav-item">
              <div class="logout">
               <a href="http://localhost/CAPSTONEPROJECT/">     <button type="button"style="background-color:#DF3A01; color: white" class="btn" >LOGOUT</button></a>
              </div>
            </li>
          </ul>

        </div>

      </div>
    </nav>
   

    <!-- Sidebar -->
     <div class="sidebar-fixed position-fixed" style="background-color:#DF3A01;" >
      <br>
     
        <center><img src="logo.png" class="img-fluid" alt="" style="width: 200px; height: 180px;"></center>

        <br>

      <div class="list-group list-group-flush" >
        <a href="dashboard.html" class="list-group-item list-group-item-action waves-effect" style="background-color:#DF3A01;color:white;">
          <i class="fas fa-chart-pie mr-3"></i>Dashboard
        </a>
        <a href="members.html" class="list-group-item list-group-item-action waves-effect" style="background-color:#DF3A01;color:white;">
          <i class="fas fa-user mr-3"></i>Members</a>
        <a href="#" class="list-group-item list-group-item-action waves-effect" style="background-color:#DF3A01; color:white;">
          <i class="fas fa-table mr-3"></i>Trainers</a>
        
        <a href="inventory.html" class="list-group-item list-group-item-action waves-effect" style="background-color:#DF3A01;color:white;">
          <i class="fas fa-map mr-3"></i>Inventory</a>
        <a href="promos.html" class="list-group-item list-group-item-action waves-effect" style="background-color:#DF3A01;color:white;">
          <i class="fas fa-money-bill-alt mr-3"></i>Promos</a>
        <a href="paymentlog.html" class="list-group-item list-group-item-action waves-effect" style="background-color:#DF3A01;color:white;">
          <i class="fas fa-money-bill-alt mr-3"></i>Payment Log</a>
      </div>

    </div>
    <!-- Sidebar -->

  </header>
  <!--Main Navigation-->

  <!--Main layout-->
  <main class="pt-5 mx-lg-5" >
    <div class="container-fluid mt-5">

      <!-- Heading -->
      <div class="card mb-4 wow fadeIn"style="height: 100px;">

        <!--Card content-->
        <div class="card-body d-sm-flex justify-content-between">

         
      
           
            <button data-toggle="modal" data-target="#add" type="button" style="background-color:#DF3A01; color: white;height: 45px;" class="btn">ADD TRAINER</button>

          <select  style="left:-40px; background-color:#DF3A01; width: 150px; height: 45px; color:white; ">
            <option value="">SORT BY:</option>
            <option value="active">active</option>
            <option value="inactive">inactive</option>
         </select>


          
          <form class="d-flex justify-content-center">
            <!-- Default input -->
            <input type="search"  placeholder="Type your query" aria-label="Search" class="form-control" style="height: 45px;" >
            <button class="btn " style="background-color:#DF3A01; color: white; height:45px; top:-5px;" type="submit">
              <i class="fas fa-search"  ></i>
            </button>

          </form>
            
              

        </div>

      </div>
      <!-- Heading -->


      <div class='card'>
        <div class='card-content'>
          <div class='card-header'style="background-color:#DF3A01; height: 70px;">
            <h3 class='card-title' style="color:white;">TRAINERS</h3>
          </div>
          <div class='card-body' id='card-body'>
            <table class='table'>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>FIRSTNAME</th>
                  <th>LASTNAME</th>
                  <th>STATUS</th>
                  <th>POSITION</th>
                  <th>ACTION</th>
                  <th>VIEW</th>
                </tr>
              </thead>
              <tbody id='tbody'>

              </tbody>
            </table>
          </div>
        </div>
      </div>

      
<!-- Register Modal -->
<div id="display" class="modal fade" role="dialog" >
  <div class="modal-dialog">

<!-- Modal content-->
    <div class="modal-content" style="width:900px; left:-60px; top:190px;">
      <div class="modal-header"style="background-color:#DF3A01;">
     
        <h3 class="modal-title" style="text-align: center;color:white;">Trainer Information</h3>
           <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" >

       <table width = "100%" >
        
         </table>

      </div>
    
    </div>

  </div>
</div>








 <!-- Register Modal -->
 <div id="add" class="modal fade" role="dialog" >
  <div class="modal-dialog">

<!-- Modal content-->
    <div class="modal-content" style="width: 887px; left:-60px; top:70px;">
      <div class="modal-header"style="background-color:#DF3A01;">
     
        <h3 class="modal-title" style="color:white;" >Add New Trainer</h3>
           <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" >
      <div class="trainer">
      

        
         <input type="text" id="fname" required="" placeholder="Firstname">
         <input type="text" id="lname" required="" placeholder="Lastname" style="left:40px;">
         <input type="text" id="email" required="" placeholder="E-mail" style="left:60px;"><br>
         <input type="text" id="phone" required="" placeholder="Contact Number"  style="left:20px;">
         <input type="date" id="birthdate"  style="left:40px;">

         <select id="sex" name="sex"  required="" style="left:60px;">
            <option value="">Gender:</option>
            <option value="M">M</option>
            <option value="F">F</option>
         </select>

         <select id="position" name="position"  required="" style="left:60px;">
            <option value="">Position:</option>
            <option value="junior">junior</option>
            <option value="senior">senior</option>
         </select><br>

         <label>Address</label><label style="left:240px;">Status</label><br>
         <input type="text" id="address" required="" placeholder="Address">


         <select id="status" name="status"  required="" style="left:40px;">
            <option value="">Status:</option>
            <option value="active">active</option>
            <option value="inactive">inactive</option>
         </select>

       

         <button id="addtrainer" type="submit"  class="btn" style="color: white;background-color:#DF3A01;float: right; width: 260px;height:50px;position: relative;left:-15px;">ADD TRAINER</button>
         
        
      </div>
    </div>
    </div>

  </div>
</div>





<div id='displayallrecords' class='modal fade' role='dialog'  >
  <div class='modal-dialog' >
   
      
      <div class='modal-body' style="width:1000px;position: relative; left: -110px;">
        
        <div class='card'>
          <div class='card-content'>
            <div class='card-header'style="background-color:#DF3A01;">
              <h3 class='card-title' style="color:white;">ALL RECORDS</h3>
            </div>
            <div class='card-body' id='card-body'>
              <table class='table'>
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>FIRSTNAME</th>
                    <th>LASTNAME</th>
                    <th>EMAIL</th>
                    <th>PHONE</th>
                    <th>BIRTHDATE</th>
                    <th>SEX</th>
                    <th>ADDRESS</th>
                    <th>POSITION</th>
                    <th>STATUS</th>
                    
                  </tr>
                </thead>
                <tbody id='tbody'>
                  <tr>
                    <td id="view-id"></td>
                    <td id="view-fname"></td>
                    <td id="view-lname"></td>
                    <td id="view-email"></td>
                    <td id="view-phone"></td>
                    <td id="view-birthdate"></td>
                    <td id="view-sex"></td>
                    <td id="view-address"></td>
                    <td id="view-position"></td>
                    <td id="view-status"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      
      </div>
    
  </div>
</div>

<div class="modal fade" id="statusUpdate">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"style="background-color:#DF3A01;">
        <h3 class="modal-title" style="color:white;">Update <span id="fname-span"></span></h3>
       
        <button type='button' class='close' id='close-updateModal' data-dismiss='modal'>&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <div class="form-row">
            <div class="col-sm-6">
              <label>First name</label>
              <input type="text" class="form-control" id="updateFname" disabled>
            </div>
            <div class="col-sm-6">
              <label>Last name</label>
              <input type="text" class="form-control" id="updateLname" disabled>
            </div>
            
            <div class="col-sm-6">
              <label>Status</label>
              <select id="updateStatus" class="form-control">
                <option value="active" selected>active</option>
                <option value="inactive">inactive</option>
              </select>

            </div>
            <div class="col-sm-6">
              <label>Position</label>
              <select id="updatePosition" class="form-control">
                <option value="junior" selected>junior</option>
                <option value="senior">senior</option>
              </select>
              
          </div>
          </div>
        </div>
      
       
      </div>
      <div class="modal-footer"  style="height: 70px;">
        <button class="btn" style="background-color:#DF3A01; color:white;" id="updateBtn">Update</button>
      </div>
    </div>
  </div>
</div>









             

              </div>
              <!-- /.First row-->

            </div>

          </div>
          <!--/.Card-->

        </div>
        <!--Grid column-->

      </div>
      <!--Grid row-->

    </div>
  </main>
  <!--Main layout-->

  

  <!-- SCRIPTS -->
  <!-- JQuery -->
  <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>
  <!-- Initializations -->

    <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script> 
  <script src="jquery-3.4.1.min.js"></script>

   <!-- Firebase CDNs -->
   <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-auth.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-firestore.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-storage.js"></script>
   <!-- Local script -->
   <script src="FIREBASE/init.js"></script>

   <script>
    var button = document.getElementById('addtrainer');

    button.addEventListener('click', function() {
      var fname = document.getElementById('fname').value;
      var lname = document.getElementById('lname').value;
      var email = document.getElementById('email').value;
      var phone = document.getElementById('phone').value;
      var birthdate = document.getElementById('birthdate').value;
      var sex = document.getElementById('sex').value;
      var position = document.getElementById('position').value;
      var address = document.getElementById('address').value;
      var status = document.getElementById('status').value;
      var date = new Date();
      var dateAdded = `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;
      

      var trainers = db.collection('trainers');
      var trainer = trainers.where('fname', '==', fname).where('lname', '==', lname).where('email', '==', email);

      trainer.get().then(function(snapshot) {
        if(snapshot.docs.length > 0) {
          alert('Error: Member already exists!');
        } else {
          trainers.add({
            fname: fname,
            lname: lname,
            email: email,
            phone: phone,
            birthdate: birthdate,
            sex: sex,
            position: position,
            address: address,
            status: 'active'
          }).then(function() {
            alert('Successfully added new member!');
            window.location.reload();
          }).catch(function(error) {
            alert(error.message);
          });
        }
      });
    });

    function renderData(doc) {
      let tbody = document.getElementById('tbody');
      let tr = document.createElement('tr');

      tr.setAttribute('data-id', doc.id);
      tr.innerHTML = 
      `<td><span class="hidden" id="${doc.id}-span"></span><a><small id='${doc.id}-small' onclick='showID("${doc.id}")'>Show</small></a></td>
      <td><b>${doc.data().fname}</b></td>
      <td><b>${doc.data().lname}<b></td>
      <td><b>${doc.data().status}<b></td>
      <td><b>${doc.data().position}<b></td>

      <td>
        <a class='btn-link text-warning' onclick='updatestat(this.parentNode.parentNode)'
         data-toggle='modal' data-target='#statusUpdate'>
         <span style="color: #DF3A01; ">
         <i  class="fas fa-user-edit" style="font-size: 25px"></i></span></a>
      </td>

       
      <td>
        <a class='btn-link text-warning' onclick='viewTrainers(this.parentNode.parentNode)'
         data-toggle='modal' data-target='#displayallrecords'>
         <span style="color: #DF3A01; ">
         <i class="fas fa-eye" style="font-size: 25px;color:#DF3A01;"></i></span></a>
      </td>`;
      tbody.appendChild(tr);
    }
  
    db.collection('trainers').orderBy('fname', 'desc').get().then(function(snapshot) {
      snapshot.forEach((doc) => {
       
        renderData(doc);
      });
    });

    function viewTrainers(x) {
      let id = x.getAttribute("data-id");
      let viewId = document.getElementById("view-id");
      let fname = document.getElementById("view-fname");
      let lname = document.getElementById("view-lname");
      let email = document.getElementById("view-email");
      let phone = document.getElementById("view-phone");
      let birthdate = document.getElementById("view-birthdate");
      let sex = document.getElementById("view-sex");
      let address = document.getElementById("view-address");
      let position = document.getElementById("view-position");
      let status = document.getElementById("view-status");
      



      
      db.collection("trainers").doc(id).get().then(function(snapshot) {
        viewId.textContent = id;
        fname.textContent = snapshot.data().fname;
        lname.textContent = snapshot.data().lname;
        email.textContent = snapshot.data().email;
        phone.textContent = snapshot.data().phone;
        birthdate.textContent = snapshot.data().birthdate;
        sex.textContent = snapshot.data().sex;
        address.textContent = snapshot.data().address;
        position.textContent = snapshot.data().position;
        status.textContent = snapshot.data().status;
        
      });
    }
   

    function showID(id) {
      let span = document.getElementById(`${id}-span`);
      let small = document.getElementById(`${id}-small`);

      if(span.classList.contains('hidden')) {
        small.textContent = ' Hide';
        span.textContent = id;
        span.classList.remove('hidden');
      } else {
        small.textContent = 'Show';
        span.classList.add('hidden');
        span.textContent = '';
      }
    }

    


    function updatestat(tr) {
      let updateFname = document.getElementById('updateFname');
      let updateLname = document.getElementById('updateLname');
      let span = document.getElementById('fname-span');
      let dataId = tr.getAttribute('data-id');
    

      db.collection('trainers').doc(dataId).get().then(function(doc) {
        span.textContent = doc.data().fname; // firstname na mo display sa update modal
        updateFname.value = doc.data().fname;
        updateLname.value = doc.data().lname;
       

      document.getElementById('updateBtn').addEventListener('click', () => {
          let status = document.getElementById('updateStatus').value;
          let postion = document.getElementById('updatePosition').value;
          db.collection('trainers').doc(doc.id).update({
            status: status,
            postion: postion
          }).then(() => {
            alert('Successfully updated member!');
            window.location.reload();
          }).catch((error) => {
            alert(`Error: ${error.message}`);
          });
        });
      });
    }

    
    
    

    </script>
</body>

</html>

